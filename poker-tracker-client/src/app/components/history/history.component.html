<div class="containerHistory">
  <mat-accordion multi="true" class="historyItem">
    <mat-expansion-panel *ngFor="let session of sessions" hideToggle>
      <mat-expansion-panel-header>
        <div class="title">
          <div
            class="amount"
            [ngClass]="session.cashOut - session.buyIn > 0 ? 'green' : 'red'"
          >
            <div *ngIf="session.cashOut - session.buyIn > 0">+</div>
            <div *ngIf="session.cashOut - session.buyIn < 0">-</div>
            <b>
              {{
                (
                  myMath.round(
                    myMath.abs(session.cashOut - session.buyIn) * 100
                  ) / 100
                ).toFixed(2)
              }}</b
            >
          </div>
        </div>

        <div class="currency">{{ this.loginService.getDefaultCurrency() }}</div>

        <div>
          {{
            this.datepipe.transform(session.startDate, "yyyy. MM. dd. hh:mm")
          }}
        </div>
      </mat-expansion-panel-header>
      <div class="details">
        <div class="money">
          <p>
            Buy In:
            {{
              (myMath.round(myMath.abs(session.buyIn) * 100) / 100).toFixed(2) +
                " " +
                this.loginService.getDefaultCurrency() +
                (session.exchangeRate == null
                  ? ""
                  : " = " +
                    (
                      myMath.round(
                        myMath.abs(session.buyIn / session.exchangeRate) * 100
                      ) / 100
                    ).toFixed(2)) +
                " " +
                (session.exchangeRate == null ? "" : session.currency)
            }}
          </p>
          <p>
            Cash Out:
            {{
              (myMath.round(myMath.abs(session.cashOut) * 100) / 100).toFixed(
                2
              ) +
                " " +
                this.loginService.getDefaultCurrency() +
                (session.exchangeRate == null
                  ? ""
                  : " = " +
                    (
                      myMath.round(
                        myMath.abs(session.cashOut / session.exchangeRate) * 100
                      ) / 100
                    ).toFixed(2)) +
                " " +
                (session.exchangeRate == null ? "" : session.currency)
            }}
          </p>
          <p *ngIf="session.specificGameType">
            Game type:
            {{
              session.specificGameType +
                " " +
                session.type[0].toUpperCase() +
                session.type.slice(1)
            }}
          </p>
          <p *ngIf="session.blinds">Blinds: {{ session.blinds }}</p>
          <p *ngIf="session.comment">Comment: {{ session.comment }}</p>
        </div>

        <div class="dates">
          <p>
            Starting date and time:
            {{
              this.datepipe.transform(session.startDate, "yyyy. MM. dd. hh:mm")
            }}
          </p>
          <p>
            Ending date and time:
            {{
              this.datepipe.transform(session.endDate, "yyyy. MM. dd. hh:mm")
            }}
          </p>
          <p *ngIf="session.ante">Ante: {{ session.ante }}</p>
          <p *ngIf="session.tableSize">
            Max table size: {{ session.tableSize }}
          </p>
          <p *ngIf="session.location">Location: {{ session.location }}</p>
        </div>
      </div>
      <button mat-flat-button color="primary" (click)="delete(session.id)">
        Remove
      </button>
    </mat-expansion-panel>
  </mat-accordion>
  <button
    mat-flat-button
    *ngIf="canLoadMore"
    (click)="loadMore()"
    class="loadMoreBtn"
    color="primary"
  >
    Load More
  </button>
</div>
